<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
        <link rel="icon" type="image/png" href="./assets/favicon.png">
        <link rel="stylesheet" href="./index.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <link rel="stylesheet" href="leaflet.css"/>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-easybutton@1.3/src/easy-button.css">
        <title>AudioMoth Chime</title>
    </head>

    <body style="background-color: #3D8E5A; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; overflow: hidden;">

        <div id="main-content" class="vertical-centre" style="display: flex; opacity: 0; color: #ffffff; flex-direction: column;">

            <div style="padding: 20px; overflow-x: hidden; overflow-y: hidden; margin: 0; width: 100%; height: 100vh;">
    
                <div class="row">
                    <p id="iphone-warning" style="font-size: 30px; transition: opacity 1s; text-align: center; min-height: fit-content; margin-bottom: 0;"></p>
                </div>
    
                <div id="time-row" class="row" style="height: 200px;">
                    <div class="col-md-10 offset-md-1 rounded-border d-flex flex-column justify-content-center align-items-center" style="text-align: center; height: 100%;">
                        <div id="time-holder" class="row align-items-center justify-content-center align-self-center" style="width: 100%;">
                            <div class="col-auto">
                                <span id="time-label" style="font-size: 100px; margin: 0; text-align: center; display: block;"></span>
                            </div>
                        </div>
                        <div id="time-zone-holder" class="row align-items-start justify-content-center align-self-center" style="font-size: 50px; gap: 8px; width: 100%;">
                            <div class="col-auto text-center">
                                <span id="time-zone-label">Local Time Zone:</span>
                                <a href="#" id="time-zone-link" style="color: white;"></a>
                                <span id="time-zone-mobile-span" style="display: none;"></span>
                            </div>
                        </div>
                    </div>
                </div>
    
                <div id="location-row" class="row" style="margin-top: 20px; height: 250px;">
                    <div class="col-md-10 offset-md-1 rounded-border d-flex flex-column justify-content-center align-items-center" style="height: 100%;">
                        <div class="row w-100">
                            <p id="lat-label" class="disabled-label" style="font-size: 60px; margin-top: 0px; margin-bottom: 0px; text-align: center;">0.000000°N</p>
                            <p id="lon-label" class="disabled-label" style="font-size: 60px; margin-top: 0px; margin-bottom: 0px; text-align: center;">0.000000°E</p>
                        </div>
                        <div class="row w-100" style="margin-top: 5px; margin-bottom: 10px;" id="location-switch-row">
                            <div class="col-md-10 offset-md-1" style="text-align: center; display: block;">
                                <div id="switch-div" class="form-switch" style="padding-left: 0px; height: 70px;">
                                    <span id="location-switch-label" style="font-size: 50px; margin-right: 50px; display: inline-flex; align-items: center; height: 100%;">Location:</span>
                                    <input class="form-check-input custom-control-input" type="checkbox" role="switch" id="location-switch" style="width: 50px; height: 35px; margin-top: 5px; display: inline-block; position: relative; top: 50%; transform: translateY(-50%);">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="map-row" class="row" style="margin-top: 20px; text-align: center; display: none; flex-grow: 1;">
                    <div class="col-md-10 offset-md-1" style="padding-left: 0px; padding-right: 0px;">
                        <div class="map-disabled" id="map-container" style="width: 100%; margin: 0; padding: 0; flex-grow: 1; display: flex;">
                            <div id="map-div" style="flex-grow: 1; display: flex; justify-content: center; align-items: center; overflow: hidden; height: calc(100vh - 620px); width: 100%;"></div>
                        </div>
                    </div>
                </div>

                <div class="row" style="height: 70px; margin-top: 20px;">
                    <div class="col-md-10 offset-md-1" style="padding-left: 0; padding-right: 0;">
                        <button class="btn btn-light w-100" id="chime-button" style="height: 70px; margin: 0; font-size:x-large;">Play Chime</button>
                    </div>
                </div>

            </div>

        </div>

    </body>

    <div class="modal fade" id="time-zone-modal" tabindex="-1" role="dialog" aria-labelledby="timeZoneModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document" style="max-width: 570px;">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="timeZoneModalLabel">Choose Time Zone Mode</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="timeZoneOption" id="local-time-zone-modal-radio" value="local" style="margin-right: 10px; margin-top: 0px;" checked>
                            <label class="form-check-label" for="local-time-zone-modal-radio" style="display: inline-block; align-items: center;">
                                <span style="height: 24px;">Local Time Zone:</span>
                                <span id="local-time-zone-modal-label">UTC</span>
                            </label>
                        </div>
                        <br>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="timeZoneOption" id="map-time-zone-modal-radio" value="map" style="margin-right: 10px; margin-top: 0px;">
                            <label class="form-check-label" for="map-time-zone-modal-radio">
                                <span style="height: 24px;">Time Zone at Map Location:</span>
                                <span class="disabled-time-zone-option-text" id="map-time-zone-modal-label" >UTC</span>
                            </label>
                        </div>
                        <br>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="timeZoneOption" id="custom-time-zone-modal-radio" value="custom" style="margin-right: 10px; margin-top: 0px;">
                            <label class="form-check-label" for="custom-time-zone-modal-radio">
                                <span style="height: 34px;">Custom:</span>
                                <select id="time-zone-select" style="font-size: 14px; width: 425px;" disabled></select>
                            </label>
                        </div>
                        <br>
                        <div style="padding-left: 90px; padding-right: 22px; gap: 8px; width:100%; display:flex; align-items:center;">
                            <div style="display:flex; gap:8px;">
                                <button type="button" class="btn btn-primary btn-sm disabled custom-time-zone-button" id="subtract-hour-button">-1h</button>
                                <button type="button" class="btn btn-secondary btn-sm disabled custom-time-zone-button" id="subtract-min-button">-15m</button>
                            </div>
                            <div style="flex:1; display:flex; justify-content:center; align-items:center;">
                                <span class="disabled-time-zone-option-text" id="offset-display" style="min-width:90px; text-align:center; font-size: 24px; font-family: 'Ubuntu';">UTC+00:00</span>
                            </div>
                            <div style="display:flex; gap:8px; justify-content:flex-end;">
                                <button type="button" class="btn btn-secondary btn-sm disabled custom-time-zone-button" id="add-min-button">+15m</button>
                                <button type="button" class="btn btn-primary btn-sm disabled custom-time-zone-button" id="add-hour-button">+1h</button>
                            </div>
                        </div>
                    </form>
                </div>
                    
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="time-zone-modal-apply-button">Apply</button>
                </div>
            </div>
        </div>
    </div>

    <script src="./scripts/audiomothchime_connector.js"></script>
    <script src="./scripts/audiomothchime.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="./scripts/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/leaflet-easybutton@1.3/src/easy-button.js"></script>
    <script type="module" src="./scripts/map.js"></script>
    <script type="module" src="./scripts/timeZoneSelection.js"></script>
    <script type="module" src="./scripts/index.js"></script>

</html>

